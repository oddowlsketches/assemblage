<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SVG Mask System Review</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #f8f8f8;
      color: #222;
      margin: 0;
      padding: 2rem;
    }
    h1 {
      text-align: center;
      margin-bottom: 2rem;
    }
    .family-group {
      margin-bottom: 3rem;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px #0001;
      padding: 1.5rem;
    }
    .family-title {
      font-size: 1.5rem;
      margin-bottom: 0.2rem;
    }
    .mask-type {
      font-size: 1.1rem;
      margin: 1.2rem 0 0.5rem 0;
      color: #444;
    }
    .variant-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }
    .variant-card {
      width: 150px;
      background: #f4f4f4;
      border-radius: 8px;
      box-shadow: 0 1px 4px #0001;
      padding: 1rem 0.5rem 0.5rem 0.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .variant-svg {
      width: 120px;
      height: 120px;
      background: #e0e0e0;
      border-radius: 6px;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .variant-name {
      font-weight: bold;
      font-size: 1rem;
      margin-bottom: 0.2rem;
      text-align: center;
    }
    .variant-params {
      color: #555;
      font-size: 0.95rem;
      text-align: center;
      word-break: break-all;
    }
    .error-message {
      color: red;
      text-align: center;
      padding: 2rem;
      font-family: monospace;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h1>SVG Mask System Review</h1>
  <div id="mask-root"></div>
  <script type="module">
    try {
      const { maskRegistry } = await import('./masks/maskRegistry.js');
      console.log('Loaded maskRegistry:', maskRegistry);

      // Parameter presets for each mask type
      const paramPresets = {
        // SLICED
        sliceHorizontalWide: [
          { offset: 0, rotation: 0 },
          { offset: -15, rotation: 0 },
          { offset: 15, rotation: 10 },
          { offset: 0, rotation: -15 },
        ],
        sliceHorizontalNarrow: [
          { offset: 0 }, { offset: 10 }, { offset: -10 }, { rotation: 15 }
        ],
        slice3xHorizontal: [
          { spacing: 10, random: false }, { spacing: 20, random: true }
        ],
        sliceVerticalWide: [
          { offset: 0 }, { offset: 10 }, { offset: -10 }, { rotation: 15 }
        ],
        sliceVerticalNarrow: [
          { offset: 0 }, { offset: 10 }, { offset: -10 }, { rotation: -10 }
        ],
        slice4xMixed: [{}],
        sliceAngled: [ { angle: 10 }, { angle: -15 } ],
        // ARCHITECTURAL
        archClassical: [ { height: 80 }, { height: 60, shallow: true }, { height: 90 } ],
        archFlat: [ {} ],
        triptychArch: [ {} ],
        windowRect: [ {} ],
        windowGrid: [ {} ],
        columnPair: [ {} ],
        // ABSTRACT
        blobIrregular: [ { rotation: 0 }, { rotation: 30 }, { rotation: 60 } ],
        blobCrescent: [ {} ],
        polygonSoft: [ { rotation: 0 }, { rotation: 45 } ],
        cloudLike: [ {} ],
        archBlob: [ {} ],
        // ALTAR
        nicheArch: [ {} ],
        nicheCluster: [ {} ],
        circleInset: [ {} ],
        nicheStack: [ {} ],
        // NARRATIVE
        panelRectWide: [ { align: 'center' }, { align: 'top' }, { align: 'bottom' } ],
        panelRectTall: [ { align: 'left' }, { align: 'right' }, { align: 'center' } ],
        panelSquare: [ { align: 'center' }, { align: 'left' }, { align: 'right' }, { align: 'top' }, { align: 'bottom' } ],
        panelOverlap: [ { angle: 10 }, { angle: -10 } ],
        panelLShape: [ {} ],
        panelGutter: [ { margin: 10 }, { margin: 20 } ],
      };

      const root = document.getElementById('mask-root');
      Object.entries(maskRegistry).forEach(([family, types]) => {
        const famGroup = document.createElement('div');
        famGroup.className = 'family-group';
        famGroup.innerHTML = `<div class="family-title">${family}</div>`;
        Object.entries(types).forEach(([type, fn]) => {
          const typeTitle = document.createElement('div');
          typeTitle.className = 'mask-type';
          typeTitle.textContent = type;
          famGroup.appendChild(typeTitle);
          const grid = document.createElement('div');
          grid.className = 'variant-grid';
          const presets = paramPresets[type] || [{}];
          presets.forEach(params => {
            const card = document.createElement('div');
            card.className = 'variant-card';
            const svgWrap = document.createElement('div');
            svgWrap.className = 'variant-svg';
            let svg;
            try {
              svg = fn(params);
            } catch (e) {
              svg = `<svg viewBox='0 0 100 100'><text x='10' y='50' font-size='10'>Error</text></svg>`;
            }
            svgWrap.innerHTML = svg;
            card.appendChild(svgWrap);
            const name = document.createElement('div');
            name.className = 'variant-name';
            name.textContent = type;
            card.appendChild(name);
            const paramDiv = document.createElement('div');
            paramDiv.className = 'variant-params';
            paramDiv.textContent = JSON.stringify(params);
            card.appendChild(paramDiv);
            grid.appendChild(card);
          });
          famGroup.appendChild(grid);
        });
        root.appendChild(famGroup);
      });
    } catch (error) {
      console.error('Error loading maskRegistry:', error);
      document.getElementById('mask-root').innerHTML = `
        <div class="error-message">
          Error loading maskRegistry:
          ${error.message}
          ${error.stack}
        </div>
      `;
    }
  </script>
</body>
</html> 